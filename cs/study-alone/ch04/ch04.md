# Chapter 4. CPU의 작동 원리

- ALU와 제어장치
- 레지스터의 종류와 역할
- 명령어 사이클
- 인터럽트


## ALU와 제어장치

- CPU는 메모리에 저장된 명령어를 읽어 들이고, 해석하고, 실행하는 장치
- 계산을 담당하는 ALU, 명령어를 읽어 들이고 해석하는 제어장치, 작은 임시 저장 장치인 레지스터

### ALU

- 레지스터로부터 피연산자를 받아들이고 제어장치로부터 제어 신호를 받아들임
- 연산한 결괏값과 **플래그**를 내보냄
- 계산을 위해서 피연산자와 수행할 연산 필요
- ALU는 레지스터를 통해 피연산자를 받아들이고 제어장치로부터 수행할 연산을 알려주는 제어 신호를 받아들임
- 산술 연산, 논리 연산 등 다양한 연산 수행
- 결괏값은 바로 메모리에 저장되지 않고 레지스터에 일시적으로 저장됨
  - c.f. 오버플로우(Overflow): 연산 결과가 연산 결과를 담을 레지스터보다 큰 상황
- 연산 결과에 대한 추가적인 정보인 플래그(flag)를 내보냄
  - CPU가 프로그램을 실행하는 도중 반드시 기억해야 하는 참고 정보
  - 플래그 레지스터에 저장
  - 대표적인 플래그 종류:
    - 부호 플래그: {1:음수, 0:양수}
    - 제로 플래그: {1:0, 0:0이 아님}
    - 캐리 플래그: 올림수나 빌림수가 발생했는지 여부 {1:발생, 0:발생X}
    - 오버플로우 플래그: {1:발생, 0:발생X}
    - 인터럽트 플래그: 인터럽트가 가능한지 여부 {1:가능, 0:불가능}
    - 슈퍼바이저 플래그: 커널 모드로 실행 중인지, 사용자 모드로 실행 중인지 여부 {1:커널 모드, 0:사용자 모드}

### 제어장치

- 제어 신호를 내보내고 명령어를 해석하는 부품
- CPU의 구성 요소 중 가장 정교하게 설계된 부품 중 하나
- CPU 제조사마다 제어장치의 구현 방식 및 명령어를 해석하는 방식, 받아들이고 내보낸 정보에 조금씩 차이가 존재

#### 제어장치가 받아들이는 정보

- 제어장치는 클럭 신호를 받아들임
- 제어장치는 '해석해야 할 명령어'를 받아들임
  - 명령어는 **명령어 레지스터**에 보관
- 제어장치는 플래그 레지스터 속 플래그 값을 받아들임
- 제어장치는 시스템 버스, 그중에서 제어 버스로 전달된 제어 신호를 받아들임

#### 제어장치가 내보내는 정보
- CPU 외부(제어 버스로 제어 신호를 내보냄)
  - 메모리 전달 제어 신호
  - 입출력 장치(보조기억장치) 전달 제어 신호
- CPU 내부
  - ALU 전달 제어 신호: 수행할 연산 지시
  - 레지스터 전달 제어 신호: 레지스터 간 데이터 이동, 레지스터에 저장된 명령어 해석


## 레지스터

